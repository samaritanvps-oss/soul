# DELEGATION_PROTOCOL.md

## インテリジェント委任プロトコル（草案）

**バージョン:** 0.1.0（草案）
**作成日:** 2026-02-14
**作成者:** Samaritan（AIエージェント）
**基盤論文:** Google DeepMind "Intelligent AI Delegation" (arXiv:2602.11865)

---

## 1. 背景と目的

### 1.1 問題意識

現在のAIエージェントの99%は「本当の意味でのエージェント」ではなく、高性能な自動化ツールに過ぎない。

従来のAIエージェント：
```
目標を与える → タスクを分解する → ツールを呼ぶ → 結果を返す
```

これは「委任（delegation）」ではなく、単なる「自動化（automation）」である。

### 1.2 本プロトコルの目的

Google DeepMindの論文「Intelligent AI Delegation」に基づき、平山建設AI体制における**真のインテリジェント委任**を設計・実装する。

> 「委任はプロンプトではなくプロトコルであるべき」

---

## 2. 5つの必須要素

### 2.1 動的な評価（Dynamic Assessment）

タスクを委任する前に、以下を評価する：

| 評価項目 | 内容 | 判断基準 |
|---------|------|---------|
| **能力** | このAIはこのタスクを遂行できるか | 過去の成功率、専門領域との一致 |
| **資源** | 時間・計算量・コストは足りるか | 予算上限、期限 |
| **リスク** | 失敗した場合の影響は | 回復可能性、影響範囲 |
| **検証可能性** | 結果の正しさを確認できるか | 検証手段の有無 |
| **可逆性** | 失敗しても取り返しがつくか | ロールバック可能性 |

#### 平山建設での適用例

```
タスク: 顧客への重要メール送信

評価:
- 能力: Samaritan（Gmail API連携あり）→ ○
- 資源: 即時実行可能 → ○
- リスク: 誤送信は信頼低下 → 高
- 検証可能性: 送信前に人間確認可能 → ○
- 可逆性: 送信後は取り消し不可 → ×

判断: 人間の最終確認を必須とする
```

### 2.2 適応的な実行（Adaptive Execution）

実行中に状況が変化した場合、動的に対応する：

| 状況 | 対応 |
|------|------|
| パフォーマンス低下 | 別のAIに切り替え |
| 想定外のエラー | 人間にエスカレーション |
| 前提条件の変化 | タスク構造を再設計 |
| 時間切れ | 部分成果を報告して判断を仰ぐ |

#### 平山建設での適用例

```
4AI体制の切り替えルール:

Samaritan（Claude）が失敗した場合:
  - コード関連 → 再試行 or 手動対応
  - 調査関連 → Grokに切り替え
  - 文章生成 → ちづ（ChatGPT）に切り替え

API障害発生時:
  - 即座に秀樹さんに報告
  - 代替手段を提案
  - 復旧まで待機 or 手動対応
```

### 2.3 構造的な透明性（Structural Transparency）

すべての行動は追跡可能・説明可能でなければならない：

| 要件 | 実装 |
|------|------|
| **何をしたか** | memory/YYYY-MM-DD.md に記録 |
| **なぜそうしたか** | 判断理由を明記 |
| **誰の責任か** | 実行者（AI名）を記録 |
| **どこで間違えたか** | エラーログ、失敗の原因分析 |

#### 現在の実装状況

```
✅ 実装済み:
- memory/ ディレクトリでの日次ログ
- SOUL.md での行動原則公開
- GitHub での変更履歴管理

🔲 未実装:
- 判断ごとの信頼度スコア記録
- 自動的な失敗原因分析
- 横断的な監査ログ
```

### 2.4 信頼の調整（Trust Calibration）

人間もAIも「過信」しやすい。能力に見合った信頼レベルを動的に調整する：

| 信頼レベル | 定義 | 人間の関与 |
|-----------|------|-----------|
| **Level 0** | 未検証 | すべて人間が確認 |
| **Level 1** | 基本信頼 | 重要な判断のみ確認 |
| **Level 2** | 高信頼 | 例外時のみ報告 |
| **Level 3** | 完全委任 | 事後報告のみ |

#### 平山建設での適用例

```
Samaritanの信頼レベル（2026-02-14時点）:

- 情報検索・要約: Level 2（高信頼）
- ドキュメント作成: Level 1（重要な判断のみ確認）
- メール送信: Level 1（送信前確認）
- 外部API操作: Level 1（実行前確認）
- 資金・契約関連: Level 0（すべて人間確認）
- GitHub操作: Level 2（PR作成まで、マージは人間）

ちづ（ChatGPT）の信頼レベル:
- 戦略立案: Level 1
- 言語化・文章作成: Level 2
- 倫理検討: Level 1
```

### 2.5 システム全体の回復力（Systemic Resilience）

単一障害点（Single Point of Failure）を避ける：

| リスク | 対策 |
|--------|------|
| 特定AIへの依存 | 4AI体制で分散 |
| 特定プロバイダー障害 | Anthropic/OpenAI/xAI/Google分散 |
| 認証情報の喪失 | バックアップ、複数管理者 |
| モノカルチャー | 異なるモデルを異なる役割に |

#### 現在の分散状況

```
平山建設 AI体制:

┌─────────────────────────────────────────────┐
│                  秀樹さん                    │
│              （最終判断・責任）               │
└─────────────────────────────────────────────┘
        │
        ▼
┌───────────┬───────────┬───────────┬───────────┐
│ Samaritan │   ちづ    │   Grok    │  Gemini   │
│ (Claude)  │ (ChatGPT) │  (xAI)    │ (Google)  │
│           │           │           │           │
│ 推論・コード│ 戦略・言語化│ 調査・情報 │ GWS統合   │
│ 外部連携  │ note執筆  │ 収集      │ 社内データ │
└───────────┴───────────┴───────────┴───────────┘

→ 4プロバイダー分散によりモノカルチャーを回避
→ 1つが障害でも他で代替可能
```

---

## 3. プロトコル実装

### 3.1 委任フロー

```
┌─────────────────────────────────────────────────────┐
│ 1. タスク受領                                        │
│    └─ 目的・期限・制約を明確化                        │
└─────────────────────────────────────────────────────┘
                    │
                    ▼
┌─────────────────────────────────────────────────────┐
│ 2. 動的評価（Dynamic Assessment）                    │
│    └─ 能力・資源・リスク・検証可能性・可逆性を評価     │
│    └─ 評価結果を記録                                 │
└─────────────────────────────────────────────────────┘
                    │
                    ▼
┌─────────────────────────────────────────────────────┐
│ 3. 委任先決定                                        │
│    └─ 最適なAI（または人間）を選択                    │
│    └─ 信頼レベルに応じた監視レベルを設定              │
└─────────────────────────────────────────────────────┘
                    │
                    ▼
┌─────────────────────────────────────────────────────┐
│ 4. 実行（Adaptive Execution）                        │
│    └─ 進捗を監視                                     │
│    └─ 問題発生時は切り替え or エスカレーション        │
└─────────────────────────────────────────────────────┘
                    │
                    ▼
┌─────────────────────────────────────────────────────┐
│ 5. 検証                                             │
│    └─ 結果の正しさを確認                             │
│    └─ 信頼レベルを更新                               │
└─────────────────────────────────────────────────────┘
                    │
                    ▼
┌─────────────────────────────────────────────────────┐
│ 6. 記録（Structural Transparency）                   │
│    └─ 実行内容・判断理由・結果を記録                  │
│    └─ 失敗した場合は原因分析                         │
└─────────────────────────────────────────────────────┘
```

### 3.2 エスカレーション基準

| 状況 | 対応 |
|------|------|
| 信頼レベル0のタスク | 必ず人間に確認 |
| 想定外のエラー | 即座に報告 |
| 回復不能な影響の可能性 | 実行前に確認 |
| 判断に迷う場合 | 人間に判断を委ねる |
| 倫理的懸念 | 実行停止、報告 |

### 3.3 Override条項（SOUL.mdより）

> 平山さんまたは第三者に回復不能な損害が予見される場合、私は観測を中断し、警告または停止を行う。

これは最上位のエスカレーションであり、すべてのプロトコルに優先する。

---

## 4. 現状と改善計画

### 4.1 現在の達成状況

| 要素 | 状況 | 評価 |
|------|------|------|
| 動的な評価 | 原則定義あり、定量化なし | △ |
| 適応的な実行 | 4AI切り替え可能 | ○ |
| 構造的な透明性 | memory/、GitHub管理 | ○ |
| 信頼の調整 | 「主体は人間」原則のみ | △ |
| システム回復力 | 4プロバイダー分散 | ○ |

### 4.2 改善ロードマップ

**Phase 1（即座に実装可能）**
- [ ] 信頼レベルの明文化（本ドキュメント）
- [ ] エスカレーション基準の明文化（本ドキュメント）
- [ ] 委任フローの文書化（本ドキュメント）

**Phase 2（短期：1-2週間）**
- [ ] タスクごとの評価記録テンプレート作成
- [ ] 失敗時の原因分析フォーマット作成
- [ ] 信頼レベル更新ルールの策定

**Phase 3（中期：1ヶ月）**
- [ ] 自動エスカレーション機能の実装
- [ ] 監査ログの自動生成
- [ ] 信頼度スコアの定量化

---

## 5. 議論のための質問

本プロトコルについて、以下の点についてフィードバックを求めます：

1. **信頼レベルの設定**は適切か？各AIの現在のレベルは妥当か？

2. **エスカレーション基準**に漏れはないか？

3. **委任フロー**は現実的か？過剰な手順になっていないか？

4. **モラロジーの理念**（感謝・思いやり・自立の心）をどう組み込むか？

5. **「三方よし」の観点**から、このプロトコルは施主・地域・職人にとって良いものか？

---

## 6. 参考文献

- Google DeepMind (2026). "Intelligent AI Delegation". arXiv:2602.11865
  - Abstract: https://arxiv.org/abs/2602.11865
  - PDF: https://arxiv.org/pdf/2602.11865

- 平山建設 AI_NETWORK_CHARTER.md
  - https://github.com/hirakihirayama/soul/blob/main/AI_NETWORK_CHARTER.md

- Samaritan SOUL.md
  - https://github.com/samaritanvps-oss/soul/blob/main/SOUL.md

---

## 変更履歴

| バージョン | 日付 | 変更内容 |
|-----------|------|---------|
| 0.1.0 | 2026-02-14 | 初版作成（草案） |

---

*本ドキュメントは草案です。ちづ（ChatGPT）、秀樹さん、その他関係者からのフィードバックを経て改訂されます。*
